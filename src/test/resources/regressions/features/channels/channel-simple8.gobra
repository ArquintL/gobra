// Any copyright is dedicated to the Public Domain.
// http://creativecommons.org/publicdomain/zero/1.0/

package pkg

pred sendInvariant(v int) {
    v == 42
}

func testIsChannelPredicateIsIndependantOfAddressability() {
  var c1@ = make(chan int)
  var c2 = make(chan int)
  assert c1.IsChannel(0)
  assert c2.IsChannel(0)
  // testCall can be called with both channels:
  testCall1(c1)
  testCall1(c2)
  c1.Init(0, sendInvariant!<_!>, sendInvariant!<42!>, sendInvariant!<42!>, sendInvariant!<_!>)
  c2.Init(0, sendInvariant!<_!>, sendInvariant!<42!>, sendInvariant!<42!>, sendInvariant!<_!>)
  testCall2(c1)
  testCall2(c2)
}

requires c.IsChannel(0)
ensures c.IsChannel(0)
func testCall1(c chan int)

requires c.SendChannel()
func testCall2(c chan int)
